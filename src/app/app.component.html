<div class="w-100 vh-100 position-relative">
  <!-- Full-screen overlay (unchanged, shows when showProductData is true) -->
  <div *ngIf="showProductData" class="overlay">
    <!-- Centered content box -->
    <div class="content-box pb-4 shadow-lg rounded-lg">
      <div class="wrapper bg-white rounded-lg shadow-md">
        <!-- Card Header -->
        <div
          class="card-header bg-yellow custom-scale text-dark font-weight-bold text-center py-3"
        >
          Templates
        </div>
        <!-- Card Body -->
        <div class="card-body">
          <div class="row w-100">
            <!-- We loop over all prebuiltTemplates in an <ng-container> -->
            <ng-container *ngFor="let template of prebuiltTemplates">
              <!-- Display only if size matches and side matches -->
              <div
                class="col-4 mb-4"
                *ngIf="
                  template.size === selectedSize &&
                  (isFront
                    ? template.side === 'front'
                    : template.side === 'back')
                "
                (click)="loadImageTemplate(template)"
                style="cursor: pointer; font-size: 13px"
              >
                <div
                  class="template-thumbnail border border-gray-300 p-2 rounded-lg overflow-hidden shadow-sm transition-transform transform hover:scale-105"
                >
                  <img
                    [src]="template.image"
                    alt="Template"
                    class="img-fluid w-100 rounded-lg"
                  />
                </div>
                {{ template.name }}
              </div>
            </ng-container>
          </div>
        </div>
      </div>
      <!-- Close Button for Product Data overlay -->
      <div class="text-center mt-3">
        <button
          class="btn btn-danger px-4 py-2 rounded-lg shadow-sm"
          (click)="toggleProductData()"
        >
          Close
        </button>
      </div>
    </div>
  </div>

  <!-- Top bar for medium and larger screens -->
  <div class="d-none d-lg-block">
    <div class="row w-100 m-0 p-0">
      <div class="col-xl-12">
        <div class="row w-100 p-0 m-0">
          <div class="custom-container">
            <div
              class="row align-items-center justify-content-center text-black text-center py-3"
            >
              <div class="col-2 p-0 px-md-3">
                <button
                  data-toggle="tooltip"
                  data-placement="bottom"
                  title="Export to image"
                  type="button"
                  class="btn btn-yellow custom-scale w-100"
                  (click)="rasterize()"
                >
                  <i class="d-inline fa fa-download" aria-hidden="true"></i>
                  Export to Image
                </button>
              </div>
              <div class="col-2 p-0 px-md-3">
                <button
                  data-toggle="tooltip"
                  data-placement="bottom"
                  title="Export to SVG"
                  type="button"
                  class="btn btn-yellow custom-scale w-100"
                  (click)="rasterizeSVG()"
                >
                  <i class="d-inline fa fa-download" aria-hidden="true"></i>
                  Export to SVG
                </button>
              </div>
              <div class="col-2 p-0 px-md-3">
                <button
                  data-toggle="tooltip"
                  data-placement="bottom"
                  title="Export to SVG"
                  type="button"
                  class="btn btn-yellow custom-scale w-100"
                  (click)="saveCanvasToJSON()"
                >
                  <i class="d-inline fa fa-download" aria-hidden="true"></i>
                  Export to Canvas
                </button>
              </div>
              <div class="col-2 p-0 px-md-3">
                <button
                  data-toggle="tooltip"
                  data-placement="bottom"
                  title="Export to HTML"
                  type="button"
                  class="btn btn-yellow custom-scale w-100"
                  (click)="exportToHtml()"
                >
                  <i class="d-inline fa fa-download" aria-hidden="true"></i>
                  Export to HTML
                </button>
              </div>
              <div class="col-2 p-0 px-md-3">
                <button
                  data-toggle="tooltip"
                  data-placement="bottom"
                  title="Clean Canvas"
                  type="button"
                  class="btn btn-danger custom-scale w-100"
                  (click)="confirmClear()"
                >
                  <i class="d-inline fa fa-ban" aria-hidden="true"></i>
                  Clean
                </button>
              </div>

              <div class="col-2 p-0 px-md-3">
                <button
                  data-toggle="tooltip"
                  data-placement="bottom"
                  title="Import Canvas"
                  type="button"
                  class="btn btn-yellow custom-scale w-100"
                  (click)="loadCanvasFromJSON()"
                >
                  <i class="d-inline fa fa-upload" aria-hidden="true"></i>
                  Import Canvas
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Download button for small screens -->
  <div class="d-lg-none text-center my-2">
    <button class="btn btn-primary" (click)="toggleShowTopBarModal()">
      <i class="fa fa-download"></i> Download
    </button>
  </div>

  <!-- Modal popup for top bar on small screens -->
  <div *ngIf="showTopBarModal" class="overlay">
    <div class="content-box-sm pb-4 shadow-lg rounded-lg">
      <div class="custom-container">
        <div
          class="row align-items-center justify-content-center text-black text-center pb-2 pt-4"
        >
          <div class="col-8 p-0 px-md-3 mb-2">
            <button
              data-toggle="tooltip"
              data-placement="bottom"
              title="Export to image"
              type="button"
              class="btn btn-yellow custom-scale w-100"
              (click)="rasterize()"
            >
              <i class="d-inline fa fa-download" aria-hidden="true"></i>
              Export to Image
            </button>
          </div>
          <div class="col-8 p-0 px-md-3 mb-2">
            <button
              data-toggle="tooltip"
              data-placement="bottom"
              title="Export to SVG"
              type="button"
              class="btn btn-yellow custom-scale w-100"
              (click)="rasterizeSVG()"
            >
              <i class="d-inline fa fa-download" aria-hidden="true"></i>
              Export to SVG
            </button>
          </div>
          <div class="col-8 p-0 px-md-3 mb-2">
            <button
              data-toggle="tooltip"
              data-placement="bottom"
              title="Export to HTML"
              type="button"
              class="btn btn-yellow custom-scale w-100"
              (click)="exportToHtml()"
            >
              <i class="d-inline fa fa-download" aria-hidden="true"></i>
              Export to HTML
            </button>
          </div>
          <div class="col-8 p-0 px-md-3 mb-2">
            <button
              data-toggle="tooltip"
              data-placement="bottom"
              title="Import Canvas"
              type="button"
              class="btn btn-yellow custom-scale w-100"
              (click)="loadCanvasFromJSON()"
            >
              <i class="d-inline fa fa-upload" aria-hidden="true"></i>
              Import Canvas
            </button>
          </div>
          <div class="col-8 p-0 px-md-3 mb-2">
            <button
              data-toggle="tooltip"
              data-placement="bottom"
              title="Clean Canvas"
              type="button"
              class="btn btn-danger custom-scale w-100"
              (click)="confirmClear()"
            >
              <i class="d-inline fa fa-ban" aria-hidden="true"></i>
              Clean
            </button>
          </div>
        </div>
      </div>
      <!-- Close button for the modal popup -->
      <div class="text-center mt-3">
        <button
          class="btn btn-danger px-4 py-2 rounded-lg shadow-sm"
          (click)="showTopBarModal = false"
        >
          Close
        </button>
      </div>
    </div>
  </div>

  <!-- line  -->
  <hr class="mb-2 mt-0" />

  <div class="row w-100 p-0 m-0">
    <div
      class="col-12 col-md-8 col-lg-4 d-flex align-items-start order-1 p-0 m-0"
    >
      <div
        class="nav flex-column nav-pills"
        id="v-pills-tab"
        role="tablist"
        aria-orientation="vertical"
      >
        <button
          class="nav-link d-flex flex-column justify-content-center align-items-center px-1 p-md-2 border-0 mb-2 bg-light-gray text-capitalize"
          [ngClass]="{ active: activeTab === 'text' }"
          id="v-pills-text-tab"
          (click)="setActiveTab('text')"
          type="button"
          role="tab"
          aria-controls="v-pills-text"
          [attr.aria-selected]="activeTab === 'text'"
        >
          <svg
            width="26"
            height="20"
            viewBox="0 0 26 20"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M7.36684 0C7.7281 0 8.05147 0.224094 8.17831 0.562355L12.3963 11.8102C12.4012 11.8226 12.406 11.8352 12.4104 11.8479L14.6783 17.8955C14.8463 18.3437 14.6192 18.8433 14.1711 19.0113C13.7229 19.1794 13.2234 18.9523 13.0553 18.5041L10.9912 12.9999H3.74247L1.67837 18.5041C1.51031 18.9523 1.01076 19.1794 0.56259 19.0113C0.114423 18.8433 -0.112647 18.3437 0.0554158 17.8955L2.32329 11.8479C2.32771 11.8352 2.33242 11.8226 2.33741 11.8102L6.55536 0.562355C6.6822 0.224094 7.00557 0 7.36684 0ZM4.39246 11.2666H10.3412L7.36684 3.3349L4.39246 11.2666ZM20.8 6.93327C19.3535 6.93327 18.1111 7.7776 17.5894 9.0055C17.4022 9.44603 16.8934 9.65141 16.4528 9.46423C16.0123 9.27706 15.8069 8.76821 15.9941 8.32768C16.793 6.44752 18.6716 5.19995 20.8 5.19995C22.2503 5.19995 23.5589 5.70722 24.5084 6.64005C25.4602 7.57516 26 8.88792 26 10.3999V18.1998C26 18.6785 25.612 19.0665 25.1333 19.0665C24.6547 19.0665 24.2667 18.6785 24.2667 18.1998V10.3999C24.2667 9.31191 23.8856 8.45803 23.2937 7.87649C22.6994 7.29266 21.8414 6.93327 20.8 6.93327Z"
              fill="#1E1E1E"
              fill-opacity="0.8"
            />
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M20.0488 11.11C21.9368 10.8879 24.0321 10.8332 25.1333 10.8332C25.612 10.8332 26 11.2212 26 11.6999V12.5124C26 14.8226 25.3221 16.5203 24.1055 17.6285C22.9043 18.7228 21.3106 19.1206 19.7167 19.1206C18.6292 19.1206 17.5987 18.7586 16.8315 18.0519C16.0556 17.3373 15.6001 16.3162 15.6001 15.1123C15.6001 13.7446 16.2395 12.7599 17.1417 12.1206C18.0048 11.5091 19.0858 11.2234 20.0487 11.11L20.0488 11.11ZM20.2513 12.8314C19.4392 12.9271 18.6786 13.156 18.1438 13.5349C17.6482 13.8861 17.3334 14.3676 17.3334 15.1123C17.3334 15.8585 17.6054 16.4082 18.0057 16.7769C18.4147 17.1536 19.0092 17.3873 19.7167 17.3873C21.0478 17.3873 22.1624 17.054 22.9383 16.3472C23.6905 15.6619 24.2543 14.5066 24.2665 12.5762C23.1552 12.5993 21.6361 12.6685 20.2514 12.8314"
              fill="#1E1E1E"
              fill-opacity="0.8"
            />
          </svg>

          <span>Text</span>
        </button>

        <button
          class="nav-link d-flex flex-column justify-content-center align-items-center px-1 p-md-2 border-0 mb-2 bg-light-gray text-capitalize"
          [ngClass]="{ active: activeTab === 'images' }"
          id="v-pills-images-tab"
          (click)="setActiveTab('images')"
          type="button"
          role="tab"
          aria-controls="v-pills-images"
          [attr.aria-selected]="activeTab === 'images'"
        >
          <span
            ><svg
              width="26"
              height="27"
              viewBox="0 0 26 27"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M24.9027 10.4407C16.0894 9.23 8.48941 15.774 9.00008 24.454M5.66675 7.78733C5.66675 8.49458 5.9477 9.17285 6.4478 9.67295C6.94789 10.173 7.62617 10.454 8.33341 10.454C9.04066 10.454 9.71894 10.173 10.219 9.67295C10.7191 9.17285 11.0001 8.49458 11.0001 7.78733C11.0001 7.08009 10.7191 6.40181 10.219 5.90171C9.71894 5.40162 9.04066 5.12067 8.33341 5.12067C7.62617 5.12067 6.94789 5.40162 6.4478 5.90171C5.9477 6.40181 5.66675 7.08009 5.66675 7.78733Z"
                stroke="#1E1E1E"
                stroke-opacity="0.8"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
              <path
                d="M1 14.542C4.70667 14.0287 8.03333 15.8193 9.832 18.6753"
                stroke="#1E1E1E"
                stroke-opacity="0.8"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
              <path
                d="M1 9.65398C1 6.66732 1 5.17398 1.58133 4.03265C2.09265 3.02916 2.90851 2.2133 3.912 1.70198C5.05333 1.12065 6.54667 1.12065 9.53333 1.12065H16.4667C19.4533 1.12065 20.9467 1.12065 22.088 1.70198C23.0915 2.2133 23.9073 3.02916 24.4187 4.03265C25 5.17398 25 6.66732 25 9.65398V16.5873C25 19.574 25 21.0673 24.4187 22.2087C23.9073 23.2121 23.0915 24.028 22.088 24.5393C20.9467 25.1207 19.4533 25.1207 16.4667 25.1207H9.53333C6.54667 25.1207 5.05333 25.1207 3.912 24.5393C2.90851 24.028 2.09265 23.2121 1.58133 22.2087C1 21.0673 1 19.574 1 16.5873V9.65398Z"
                stroke="#1E1E1E"
                stroke-opacity="0.8"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
            </svg>
          </span>

          <span>Images</span>
        </button>
        <button
          class="nav-link d-flex flex-column justify-content-center align-items-center px-1 p-md-2 border-0 mb-2 bg-light-gray text-capitalize"
          [ngClass]="{ active: activeTab === 'product' }"
          id="v-pills-product-tab"
          (click)="setActiveTab('product')"
          type="button"
          role="tab"
          aria-controls="v-pills-product"
          [attr.aria-selected]="activeTab === 'product'"
        >
          <span
            ><svg
              width="26"
              height="27"
              viewBox="0 0 26 27"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M24.9027 10.4407C16.0894 9.23 8.48941 15.774 9.00008 24.454M5.66675 7.78733C5.66675 8.49458 5.9477 9.17285 6.4478 9.67295C6.94789 10.173 7.62617 10.454 8.33341 10.454C9.04066 10.454 9.71894 10.173 10.219 9.67295C10.7191 9.17285 11.0001 8.49458 11.0001 7.78733C11.0001 7.08009 10.7191 6.40181 10.219 5.90171C9.71894 5.40162 9.04066 5.12067 8.33341 5.12067C7.62617 5.12067 6.94789 5.40162 6.4478 5.90171C5.9477 6.40181 5.66675 7.08009 5.66675 7.78733Z"
                stroke="#1E1E1E"
                stroke-opacity="0.8"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
              <path
                d="M1 14.542C4.70667 14.0287 8.03333 15.8193 9.832 18.6753"
                stroke="#1E1E1E"
                stroke-opacity="0.8"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
              <path
                d="M1 9.65398C1 6.66732 1 5.17398 1.58133 4.03265C2.09265 3.02916 2.90851 2.2133 3.912 1.70198C5.05333 1.12065 6.54667 1.12065 9.53333 1.12065H16.4667C19.4533 1.12065 20.9467 1.12065 22.088 1.70198C23.0915 2.2133 23.9073 3.02916 24.4187 4.03265C25 5.17398 25 6.66732 25 9.65398V16.5873C25 19.574 25 21.0673 24.4187 22.2087C23.9073 23.2121 23.0915 24.028 22.088 24.5393C20.9467 25.1207 19.4533 25.1207 16.4667 25.1207H9.53333C6.54667 25.1207 5.05333 25.1207 3.912 24.5393C2.90851 24.028 2.09265 23.2121 1.58133 22.2087C1 21.0673 1 19.574 1 16.5873V9.65398Z"
                stroke="#1E1E1E"
                stroke-opacity="0.8"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
            </svg>
          </span>

          <span>product</span>
        </button>

        <button
          class="nav-link d-flex flex-column justify-content-center align-items-center px-1 p-md-2 border-0 mb-2 bg-light-gray text-capitalize"
          [ngClass]="{ active: activeTab === 'graphics' }"
          id="v-pills-graphics-tab"
          (click)="setActiveTab('graphics')"
          type="button"
          role="tab"
          aria-controls="v-pills-graphics"
          [attr.aria-selected]="activeTab === 'graphics'"
        >
          <div>
            <svg
              width="26"
              height="26"
              viewBox="0 0 26 26"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M19.7164 0.120667L13.4349 11.6559H26L19.7164 0.120667ZM19.7164 4.39522L22.542 9.58435H16.892L19.7164 4.39522ZM6.11142 12.6916C2.74097 12.6916 0 15.4788 0 18.9061C0 22.3335 2.74097 25.1207 6.11142 25.1207C9.48186 25.1207 12.2228 22.3335 12.2228 18.9061C12.2228 15.4788 9.48186 12.6916 6.11142 12.6916ZM14.26 13.7274V25.1207H25.4642V13.7274H14.26ZM6.11142 14.7631C8.35838 14.7631 10.1857 16.6213 10.1857 18.9061C10.1857 21.191 8.35838 23.0492 6.11142 23.0492C3.86445 23.0492 2.03714 21.191 2.03714 18.9061C2.03714 16.6213 3.86445 14.7631 6.11142 14.7631ZM16.2971 15.7989H23.4271V23.0492H16.2971V15.7989Z"
                fill="#1E1E1E"
                fill-opacity="0.8"
              />
            </svg>
          </div>
          <span>graphics</span>
        </button>

        <button
          class="nav-link d-flex flex-column justify-content-center align-items-center px-1 p-md-2 border-0 mb-2 bg-light-gray text-capitalize"
          [ngClass]="{ active: activeTab === 'design-color' }"
          id="v-pills-design-color-tab"
          (click)="setActiveTab('design-color')"
          type="button"
          role="tab"
          aria-controls="v-pills-design-color"
          [attr.aria-selected]="activeTab === 'design-color'"
        >
          <div>
            <svg
              width="26"
              height="30"
              viewBox="0 0 26 30"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M21.5378 13.7144L9.90089 25.8638L0 15.5269L9.03286 6.08203V2.83936C9.03286 2.46175 9.10068 2.10775 9.23631 1.77734C9.37194 1.44694 9.55729 1.15902 9.79238 0.913574C10.0275 0.668132 10.3033 0.474609 10.6197 0.333008C10.9362 0.191406 11.2753 0.120605 11.6369 0.120605C11.9986 0.120605 12.3377 0.191406 12.6541 0.333008C12.9706 0.474609 13.2464 0.668132 13.4815 0.913574C13.7166 1.15902 13.9019 1.44694 14.0376 1.77734C14.1732 2.10775 14.241 2.46175 14.241 2.83936V11.9019H12.505V2.83936C12.505 2.59391 12.4191 2.38151 12.2473 2.20215C12.0755 2.02279 11.872 1.93311 11.6369 1.93311C11.4018 1.93311 11.1984 2.02279 11.0266 2.20215C10.8548 2.38151 10.7689 2.59391 10.7689 2.83936V6.84668L3.3229 14.6206H18.2149L19.0965 13.7144L16.2347 10.7266L17.4554 9.45215L21.5378 13.7144ZM9.90089 23.3149L16.4789 16.4331H3.3229L9.90089 23.3149ZM25.4575 22.6353C25.6383 22.9657 25.774 23.3149 25.8644 23.6831C25.9548 24.0513 26 24.4289 26 24.8159C26 25.3918 25.9005 25.9393 25.7016 26.4585C25.5027 26.9777 25.2269 27.4355 24.8743 27.832C24.5216 28.2285 24.1057 28.54 23.6265 28.7666C23.1473 28.9932 22.6228 29.1112 22.0532 29.1206C21.4926 29.1206 20.9682 29.0073 20.4799 28.7808C19.9917 28.5542 19.5667 28.2521 19.205 27.8745C18.8433 27.4969 18.5585 27.0485 18.3505 26.5293C18.1426 26.0101 18.0341 25.4626 18.025 24.8867C18.025 24.141 18.2059 23.4424 18.5676 22.791L22.0532 16.4189L25.4575 22.6353ZM22.0532 27.3081C22.3787 27.3081 22.6771 27.242 22.9484 27.1099C23.2196 26.9777 23.4547 26.7936 23.6536 26.5576C23.8525 26.3216 24.0063 26.0526 24.1148 25.7505C24.2233 25.4484 24.2775 25.1322 24.2775 24.8018C24.2775 24.3392 24.169 23.9144 23.952 23.5273L22.0532 20.0723L20.073 23.6973C19.8651 24.0749 19.7611 24.4714 19.7611 24.8867C19.7611 25.2171 19.8199 25.5286 19.9374 25.8213C20.0549 26.1139 20.2222 26.3688 20.4392 26.5859C20.6562 26.8031 20.8958 26.9777 21.1581 27.1099C21.4203 27.242 21.7187 27.3081 22.0532 27.3081Z"
                fill="#1E1E1E"
                fill-opacity="0.8"
              />
            </svg>
          </div>
          <span>design</span>
        </button>

        <button
          class="nav-link d-flex flex-column justify-content-center align-items-center px-1 p-md-2 border-0 mb-2 bg-light-gray text-capitalize"
          [ngClass]="{ active: activeTab === 'background' }"
          id="v-pills-background-tab"
          (click)="setActiveTab('background')"
          type="button"
          role="tab"
          aria-controls="v-pills-background"
          [attr.aria-selected]="activeTab === 'background'"
        >
          <div>
            <svg
              width="26"
              height="24"
              viewBox="0 0 26 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M25.6367 0.615301C25.8879 0.90328 26.0146 1.2792 25.9889 1.66052C25.9632 2.04184 25.7873 2.39737 25.4997 2.64904L2.42177 22.8422C2.28022 22.9731 2.11387 23.0743 1.93254 23.1398C1.75121 23.2054 1.55859 23.2339 1.36605 23.2237C1.17352 23.2135 0.984984 23.1648 0.811594 23.0805C0.638204 22.9961 0.483478 22.8779 0.356563 22.7328C0.229648 22.5876 0.133121 22.4185 0.0726868 22.2354C0.0122531 22.0523 -0.0108604 21.859 0.00471303 21.6668C0.0202865 21.4746 0.0742307 21.2875 0.163357 21.1166C0.252482 20.9456 0.374981 20.7942 0.52361 20.6714L23.6015 0.478277C23.8895 0.227019 24.2654 0.100324 24.6467 0.126016C25.028 0.151707 25.385 0.327684 25.6367 0.615301ZM25.6367 9.8104C25.8879 10.0984 26.0146 10.4743 25.9889 10.8556C25.9632 11.2369 25.7873 11.5925 25.4997 11.8441L12.9309 22.8436C12.7882 22.9684 12.6224 23.0638 12.4429 23.1244C12.2634 23.1851 12.0737 23.2098 11.8847 23.1971C11.6956 23.1845 11.5109 23.1347 11.3411 23.0507C11.1713 22.9666 11.0197 22.85 10.895 22.7073C10.7702 22.5647 10.6748 22.3989 10.6142 22.2194C10.5535 22.0399 10.5288 21.8502 10.5415 21.6611C10.5541 21.4721 10.6039 21.2874 10.6879 21.1176C10.772 20.9478 10.8886 20.7962 11.0313 20.6714L23.6001 9.67337C23.7427 9.54852 23.9086 9.45302 24.0882 9.39233C24.2678 9.33163 24.4576 9.30695 24.6468 9.31967C24.8359 9.3324 25.0207 9.38229 25.1906 9.46649C25.3604 9.5507 25.512 9.66756 25.6367 9.8104ZM23.6001 18.1473C23.8757 17.9026 24.2346 17.7727 24.603 17.7843C24.9714 17.7959 25.3214 17.9481 25.5811 18.2096C25.8409 18.4712 25.9906 18.8223 25.9996 19.1908C26.0086 19.5593 25.8761 19.9172 25.6295 20.1911L25.4997 20.3195L22.6149 22.8436C22.3388 23.0856 21.9809 23.2132 21.614 23.2004C21.2471 23.1877 20.8989 23.0355 20.6403 22.7749C20.3818 22.5143 20.2323 22.1649 20.2224 21.7979C20.2124 21.4309 20.3428 21.074 20.587 20.7998L20.7168 20.6714L23.6001 18.1473ZM15.129 0.615301C15.3805 0.903097 15.5074 1.27891 15.482 1.66022C15.4566 2.04153 15.2809 2.39717 14.9934 2.64904L2.42465 13.6485C2.28202 13.7733 2.11622 13.8687 1.93672 13.9293C1.75721 13.99 1.56752 14.0147 1.37847 14.002C1.18942 13.9894 1.00471 13.9396 0.834896 13.8556C0.665079 13.7715 0.513478 13.6549 0.388749 13.5122C0.264019 13.3696 0.168604 13.2038 0.107951 13.0243C0.0472976 12.8448 0.0225943 12.6551 0.0352513 12.4661C0.0479082 12.277 0.0976778 12.0923 0.181718 11.9225C0.265758 11.7527 0.382423 11.6011 0.525052 11.4763L13.0938 0.478277C13.3818 0.227019 13.7578 0.100324 14.1391 0.126016C14.5204 0.151707 14.8759 0.327684 15.1276 0.615301H15.129ZM4.02568 0.478277C4.30176 0.236302 4.65971 0.108702 5.0266 0.12148C5.39349 0.134258 5.7417 0.286452 6.00027 0.547048C6.25884 0.807644 6.40832 1.15703 6.41823 1.524C6.42815 1.89098 6.29777 2.24793 6.05365 2.52211L5.92528 2.65048L2.42465 5.71551C2.14991 5.96667 1.78872 6.10188 1.41659 6.09288C1.04447 6.08388 0.690227 5.93137 0.427951 5.66723C0.165675 5.40309 0.0156699 5.04778 0.00930461 4.6756C0.00293934 4.30342 0.140706 3.94319 0.393797 3.67024L0.52361 3.54187L4.02568 0.478277Z"
                fill="#1E1E1E"
                fill-opacity="0.8"
              />
            </svg>
          </div>
          <span>background</span>
        </button>
      </div>
      <div class="tab-content w-100 px-2" id="v-pills-tabContent">
        <div
          class="tab-pane fade w-100"
          [ngClass]="{ 'show active': activeTab === 'text' }"
          id="v-pills-text"
          role="tabpanel"
          aria-labelledby="v-pills-text-tab"
        >
          <div class="card mb-2">
            <div class="card-header bg-yellow">Add Text</div>
            <div class="card-body p-2 bg-light-gray">
              <!-- Input for entering text -->
              <div class="input-group">
                <input
                  type="text"
                  class="form-control"
                  [(ngModel)]="canvas.textString"
                  placeholder="Enter your text here"
                />
              </div>

              <!-- Dropdown for font selection (on a new line) -->
              <div class="input-group mt-2">
                <select
                  class="form-control"
                  [(ngModel)]="selectedFont"
                  (change)="onFontFamilyChange()"
                >
                  <!-- Sans-serif Fonts -->
                  <option value="Arial" style="font-family: Arial">
                    Arial
                  </option>
                  <option value="Roboto" style="font-family: Roboto">
                    Roboto
                  </option>
                  <option value="Open Sans" style="font-family: 'Open Sans'">
                    Open Sans
                  </option>
                  <option value="Poppins" style="font-family: Poppins">
                    Poppins
                  </option>
                  <option value="Lato" style="font-family: Lato">Lato</option>
                  <option value="Montserrat" style="font-family: 'Montserrat'">
                    Montserrat
                  </option>
                  <option value="Nunito" style="font-family: Nunito">
                    Nunito
                  </option>
                  <option
                    value="Source Sans Pro"
                    style="font-family: 'Source Sans Pro'"
                  >
                    Source Sans Pro
                  </option>
                  <option value="PT Sans" style="font-family: 'PT Sans'">
                    PT Sans
                  </option>
                  <option value="Inter" style="font-family: Inter">
                    Inter
                  </option>

                  <!-- Serif Fonts -->
                  <option
                    value="Times New Roman"
                    style="font-family: 'Times New Roman'"
                  >
                    Times New Roman
                  </option>
                  <option value="Georgia" style="font-family: Georgia">
                    Georgia
                  </option>
                  <option
                    value="Playfair Display"
                    style="font-family: 'Playfair Display'"
                  >
                    Playfair Display
                  </option>
                  <option
                    value="Merriweather"
                    style="font-family: Merriweather"
                  >
                    Merriweather
                  </option>
                  <option
                    value="Crimson Text"
                    style="font-family: 'Crimson Text'"
                  >
                    Crimson Text
                  </option>
                  <option
                    value="Libre Baskerville"
                    style="font-family: 'Libre Baskerville'"
                  >
                    Libre Baskerville
                  </option>
                  <option
                    value="Cormorant Garamond"
                    style="font-family: 'Cormorant Garamond'"
                  >
                    Cormorant Garamond
                  </option>
                  <option value="Lora" style="font-family: Lora">Lora</option>
                  <option value="PT Serif" style="font-family: 'PT Serif'">
                    PT Serif
                  </option>
                  <option value="Cardo" style="font-family: Cardo">
                    Cardo
                  </option>

                  <!-- Display Fonts -->
                  <option value="Oswald" style="font-family: Oswald">
                    Oswald
                  </option>
                  <option value="Bebas Neue" style="font-family: 'Bebas Neue'">
                    Bebas Neue
                  </option>
                  <option
                    value="Abril Fatface"
                    style="font-family: 'Abril Fatface'"
                  >
                    Abril Fatface
                  </option>
                  <option value="Pacifico" style="font-family: Pacifico">
                    Pacifico
                  </option>
                  <option
                    value="Fredoka One"
                    style="font-family: 'Fredoka One'"
                  >
                    Fredoka One
                  </option>
                  <option value="Lobster" style="font-family: Lobster">
                    Lobster
                  </option>
                  <option
                    value="Dancing Script"
                    style="font-family: 'Dancing Script'"
                  >
                    Dancing Script
                  </option>
                  <option value="Chewy" style="font-family: Chewy">
                    Chewy
                  </option>
                  <option value="Cookie" style="font-family: Cookie">
                    Cookie
                  </option>
                  <option value="Satisfy" style="font-family: Satisfy">
                    Satisfy
                  </option>

                  <!-- Monospace Fonts -->
                  <option
                    value="Courier New"
                    style="font-family: 'Courier New'"
                  >
                    Courier New
                  </option>
                  <option
                    value="Lucida Console"
                    style="font-family: 'Lucida Console'"
                  >
                    Lucida Console
                  </option>
                  <option value="Fira Code" style="font-family: 'Fira Code'">
                    Fira Code
                  </option>
                  <option
                    value="Source Code Pro"
                    style="font-family: 'Source Code Pro'"
                  >
                    Source Code Pro
                  </option>
                  <option value="Inconsolata" style="font-family: Inconsolata">
                    Inconsolata
                  </option>
                </select>
              </div>

              <div class="input-group mt-2">
                <select
                  class="form-control"
                  [(ngModel)]="selectedFontSize"
                  (change)="onFontSizeChange()"
                >
                  <option *ngFor="let size of fontSizes" [value]="size">
                    {{ size }}px
                  </option>
                </select>
              </div>

              <!-- Buttons for bold and italic -->
              <div class="btn-group mt-2" role="group">
                <button
                  class="btn bg-text mr-2"
                  [ngClass]="{ active: isBold }"
                  (click)="toggleBold()"
                >
                  <i class="fa fa-bold"></i> Bold
                </button>
                <button
                  class="btn bg-text"
                  [ngClass]="{ active: isItalic }"
                  (click)="toggleItalic()"
                >
                  <i class="fa fa-italic"></i> Italic
                </button>
              </div>

              <!-- Button to add text -->
              <div class="input-group mt-2">
                <button
                  id="add-text"
                  class="btn btn-yellow w-100"
                  (click)="addText()"
                >
                  <i class="fa fa-plus"></i> Add Text
                </button>
              </div>
            </div>

            <div class="custom-item" *ngIf="!canvas.props.canvasImage">
              <div class="custom-item-title">Text Color</div>
              <div class="custom-item-body">
                <input
                  type="color"
                  class="form-control"
                  (input)="onObjectColorChange($event)"
                  value="#000000"
                />
              </div>
            </div>
          </div>
        </div>

        <div
          class="tab-pane fade"
          [ngClass]="{ 'show active': activeTab === 'images' }"
          id="v-pills-images"
          role="tabpanel"
          aria-labelledby="v-pills-images-tab"
        >
          <div class="card max-height">
            <div class="card-header bg-yellow">Add images</div>
            <div class="card-body p-2 w-100 row w-100">
              <div class="col-4 p-2" *ngFor="let img of images">
                <div class="image-container">
                  <img
                    class="images-item w-100"
                    (click)="getImgPolaroid($event)"
                    [src]="img"
                    alt="Image"
                  />
                </div>
              </div>
            </div>
          </div>
          <br />
          <div class="card">
            <div class="card-header bg-yellow">Upload image</div>
            <div class="card-body p-2 text-center">
              <img
                id="testImage"
                *ngIf="canvas.url"
                class="images-item col-4-upload"
                [src]="canvas.url"
                (click)="addImageOnCanvas(canvas.url)"
              />
              <input class="w-100" type="file" (change)="readUrl($event)" />
              <br />
              <br />
              <div
                class="btn-group btn-group-justified"
                role="group"
                aria-label="..."
              >
                <div class="btn-group" role="group">
                  <button
                    type="button"
                    class="btn btn-outline-danger btn-sm"
                    (click)="removeWhite(canvas.url)"
                  >
                    <i class="fa fa-times" aria-hidden="true"></i> Remove
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div
          class="tab-pane fade"
          [ngClass]="{ 'show active': activeTab === 'graphics' }"
          id="v-pills-graphics"
          role="tabpanel"
          aria-labelledby="v-pills-graphics-tab"
        >
          <div class="card mb-2">
            <div class="card-header bg-yellow">Add figure</div>
            <div class="card-body p-2 text-center max-height">
              <div
                class="btn-group btn-group-vertical"
                role="group"
                aria-label="..."
              >
                <button
                  type="button"
                  class="btn btn-primary"
                  (click)="addFigure('rectangle')"
                >
                  Rectangle
                </button>
                <button
                  type="button"
                  class="btn btn-primary"
                  (click)="addFigure('square')"
                >
                  Square
                </button>
                <button
                  type="button"
                  class="btn btn-primary"
                  (click)="addFigure('triangle')"
                >
                  Triangle
                </button>
                <button
                  type="button"
                  class="btn btn-primary"
                  (click)="addFigure('circle')"
                >
                  Circle
                </button>
              </div>
            </div>
          </div>
        </div>

        <div
          class="tab-pane fade"
          [ngClass]="{ 'show active': activeTab === 'qr-codes' }"
          id="v-pills-qr-codes"
          role="tabpanel"
          aria-labelledby="v-pills-qr-codes-tab"
        >
          Qr code content
        </div>
        <div
          class="tab-pane fade"
          [ngClass]="{ 'show active': activeTab === 'product' }"
          id="v-pills-product"
          role="tabpanel"
          aria-labelledby="v-pills-product-tab"
        >
          <div class="card">
            <div class="card-header bg-yellow">Products</div>
            <div
              class="card-body row p-2 align-items-center justify-content-center"
            >
              <div class="col-md-12 col-12">
                <button
                  type="button"
                  class="btn btn-yellow w-100 my-1 mt-2"
                  (click)="changeSizeWithMeasures(408, 528, '4.25x5.5')"
                >
                  First Class Postcard (4.25 x 5.5)
                </button>
              </div>
              <div class="col-md-12 col-12">
                <button
                  type="button"
                  class="btn btn-yellow w-100 my-1"
                  (click)="changeSizeWithMeasures(528, 1056, '8.5x5.5')"
                >
                  Half Page Postcard (8.5 x 5.5)
                </button>
              </div>
            </div>
          </div>
        </div>

        <div
          class="tab-pane fade"
          [ngClass]="{ 'show active': activeTab === 'tables' }"
          id="v-pills-tables"
          role="tabpanel"
          aria-labelledby="v-pills-tables-tab"
        >
          Table content
        </div>

        <div
          class="tab-pane fade"
          [ngClass]="{ 'show active': activeTab === 'design-color' }"
          id="v-pills-design-color"
          role="tabpanel"
          aria-labelledby="v-pills-design-color-tab"
        >
          <div class="card">
            <div class="card-header bg-yellow">Templates</div>
            <div class="card-body px-0 template-max-height">
              <div class="row p-0 m-0 w-100">
                <!-- Loop through image templates -->
                <div
                  class="col-4 text-center w-100 mb-3 template-name"
                  *ngFor="let template of prebuiltTemplates"
                  (click)="loadImageTemplate(template)"
                  style="cursor: pointer; font-size: 12px"
                >
                  <!-- Image template -->
                  <div
                    class="template-thumbnail"
                    style="
                      border: 1px solid #ddd;
                      padding: 5px;
                      border-radius: 5px;
                    "
                  >
                    <img
                      [src]="template.image"
                      alt="Template"
                      class="img-fluid w-100"
                      style="
                        border-radius: 5px;
                        max-height: 100px;
                        object-fit: cover;
                      "
                    />
                  </div>
                  {{ template.name }}
                </div>
              </div>
            </div>
          </div>
        </div>

        <div
          class="tab-pane fade"
          [ngClass]="{ 'show active': activeTab === 'background' }"
          id="v-pills-background"
          role="tabpanel"
          aria-labelledby="v-pills-background-tab"
        >
          <div class="card" *ngIf="!canvas.selected">
            <div class="card-header bg-yellow">Canvas</div>
            <div class="card-body">
              <div class="custom-item" *ngIf="!canvas.props.canvasImage">
                <div class="custom-item-title">Background Color</div>
                <div class="custom-item-body">
                  <input
                    type="text"
                    class="form-control"
                    [cpPosition]="'bottom'"
                    [(colorPicker)]="canvas.props.canvasFill"
                    [style.background]="canvas.props.canvasFill"
                    [value]="canvas.props.canvasFill"
                    (colorPickerChange)="setCanvasFill()"
                  />
                </div>
              </div>
              <div class="custom-item">
                <div class="custom-item-title">Background Image</div>
                <div class="custom-item-body">
                  <!-- URL input for background -->
                  <input
                    type="text"
                    class="form-control mb-2"
                    placeholder="http://example.jpg"
                    [(ngModel)]="canvas.props.canvasImage"
                    (keyup)="setCanvasImageFromURL()"
                  />

                  <!-- File input for uploading background -->
                  <input
                    type="file"
                    class="form-control mb-2"
                    (change)="uploadBackgroundImage($event)"
                    accept="image/*"
                  />

                  <!-- Sliders to control scaling -->
                  <div class="d-flex align-items-center">
                    <label>Scale X:</label>
                    <input
                      type="range"
                      min="0.1"
                      max="5"
                      step="0.1"
                      [(ngModel)]="backgroundScaleX"
                      (input)="updateBackgroundTransform()"
                    />
                  </div>
                  <div class="d-flex align-items-center">
                    <label>Scale Y:</label>
                    <input
                      type="range"
                      min="0.1"
                      max="5"
                      step="0.1"
                      [(ngModel)]="backgroundScaleY"
                      (input)="updateBackgroundTransform()"
                    />
                  </div>

                  <!-- Sliders to control position -->
                  <div class="d-flex align-items-center">
                    <label>Position X:</label>
                    <input
                      type="range"
                      min="-500"
                      max="500"
                      step="1"
                      [(ngModel)]="backgroundPositionX"
                      (input)="updateBackgroundTransform()"
                    />
                  </div>

                  <div class="d-flex align-items-center">
                    <label>Position Y:</label>
                    <input
                      type="range"
                      min="-500"
                      max="500"
                      step="1"
                      [(ngModel)]="backgroundPositionY"
                      (input)="updateBackgroundTransform()"
                    />
                  </div>
                </div>
              </div>

              <div class="custom-item" *ngIf="!canvas.props.canvasImage">
                <div class="custom-item-title">Object Background</div>
                <div class="custom-item-body">
                  <input
                    type="color"
                    class="form-control"
                    (change)="onObjectColorChange($event)"
                    value="#efefef"
                  />
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- canvas sectiion -->
    <div
      class="col-md-12 col-lg-6 p-0 d-flex justify-content-center order-3 order-lg-2 mt-4 mt-lg-0"
    >
      <angular-editor-fabric-js #canvas></angular-editor-fabric-js>
    </div>

    <!-- right bar  -->
    <div
      class="col-12 mt-4 mt-md-0 col-md-4 col-lg-2 p-0 order-2 order-lg-3 m-0"
    >
      <div class="card">
        <div class="card-header bg-yellow">Options</div>
        <div class="card-body p-2 text-center bg-light-gray">
          <div class="btn-group" role="group" aria-label="...">
            <button
              data-toggle="tooltip"
              data-placement="bottom"
              title="Delete element"
              type="button"
              class="btn btn-outline-danger"
              (click)="removeSelected()"
            >
              <i class="fa fa-trash" aria-hidden="true"></i>
            </button>

            <button
              data-toggle="tooltip"
              data-placement="bottom"
              title="Send to back"
              type="button"
              class="btn btn-outline-primary"
              (click)="sendToBack()"
            >
              <i class="fa fa-level-down" aria-hidden="true"></i>
            </button>

            <button
              data-toggle="tooltip"
              data-placement="bottom"
              title="Send to front"
              type="button"
              class="btn btn-outline-primary"
              (click)="bringToFront()"
            >
              <i class="fa fa-level-up" aria-hidden="true"></i>
            </button>
            <button
              data-toggle="tooltip"
              data-placement="bottom"
              title="Clone"
              type="button"
              class="btn btn-outline-primary"
              (click)="clone()"
            >
              <i class="fa fa-clone" aria-hidden="true"></i>
            </button>
          </div>
          <br />
          <br />

          <button (click)="toggleSide()" class="btn btn-primary">
            Switch to {{ isFront ? "Back" : "Front" }}
          </button>
          <br />
          <br />
          <button (click)="preview()" class="btn btn-primary">Preview</button>
          <!-- <button (click)="saveDesigns()" class="btn btn-success">Save Design</button> -->
        </div>
      </div>

      <div class="note">
        <h5><b>Note</b></h5>

        <p>
          The "<strong>-----</strong>" represents the
          <strong>safe area</strong>, ensuring that critical content stays
          within the protected zone. The "<strong>____</strong>" denotes the
          <strong>bleed area</strong>, which is the extra space beyond the trim
          to avoid any unintended cut-off during printing or production.
        </p>
      </div>
    </div>
  </div>

  <br />
  <br />
</div>

<!--Preview Modal -->
<div
  #previewModal
  class="modal"
  tabindex="-1"
  role="dialog"
  aria-labelledby="previewModalLabel"
  aria-hidden="true"
  style="display: none"
>
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="previewModalLabel">Canvas Preview</h5>
        <button
          type="button"
          class="close"
          (click)="closeModal()"
          aria-label="Close"
        >
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <img #modalImage src="" alt="Canvas Preview" class="img-fluid" />
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" (click)="closeModal()">
          Close
        </button>
      </div>
    </div>
  </div>
</div>
